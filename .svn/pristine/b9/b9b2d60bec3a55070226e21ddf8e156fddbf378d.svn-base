package buddychallenge.entities;

import java.util.ArrayList;
import java.util.List;

import buddychallenge.exceptions.PostException;
import buddychallenge.rules.PostingRules;

public class Post {
	private static int id;
	private int postID;
	private String text;
	private User user;
	private PostingRules rule;
	private List<Comment> comments;
	
	private PostException postException;
	
	
	public Post(String text, User user, PostingRules rule) throws PostException {
		postID = id++;
		if(text.isEmpty())
			throw new PostException("Post text can not be empty");
		else 
			this.text = text;
		this.user = user;
		this.rule = rule;
		comments = new ArrayList<Comment>();
		user.createPost(this);
	}
	
	public Post() throws PostException{
		this("Nothing", null , null);
	}

	public int getPostID() {
		return postID;
	}

	public String getText() {
		return text;
	}
 
	public void setText(String text) throws PostException{
		if(text.isEmpty())
			throw new PostException("Post text can not be empty");
		else
			this.text = text;
	}

	public User getUser() {
		return user;
	}

	public void setUser(User user) {
		this.user = user;
	}

	public List<Comment> getComments() {
		return new ArrayList<Comment>(comments);
	}

	public void setComments(List<Comment> comments) {
		this.comments = comments;
	}
	
	public void createComment(Comment c){
		comments.add(c);
	}
	
	public void deleteComent(Comment com){
		if(comments.contains(com))
			comments.remove(com);
	}

	public PostingRules getRule() {
		return rule;
	}

	public void setRule(PostingRules rule) {
		this.rule = rule;
	}

	
}
